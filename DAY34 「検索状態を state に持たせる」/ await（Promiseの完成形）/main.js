// ğŸŸ¢ DAY34 ã®ãƒ†ãƒ¼ãƒï¼ˆè¶…é‡è¦ï¼‰
// ã€Œæ¤œç´¢çŠ¶æ…‹ã‚’ state ã«æŒãŸã›ã‚‹ã€

// ä»Šã¾ã§ğŸ‘‡

// input â†’ ç›´æ¥ renderSearchList(keyword)

// DAY34ã§ã¯ğŸ‘‡

// input â†’ state ã‚’æ›´æ–°

// state ã‚’è¦‹ã¦ UI ã‚’æç”»

// ğŸ‘‰ ã€Œã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã€â†’ã€ŒçŠ¶æ…‹é§†å‹•ã€ã¸ã®é€²åŒ–ã€‚

// ã¾ãšå…¨ä½“åƒï¼ˆå…ˆã«ç†è§£ï¼‰
// ä»Šã¾ã§ï¼ˆDAY33ï¼‰
// input
//  â†“
// renderSearchList(keyword)
//  â†“
// filter â†’ è¡¨ç¤º

// DAY34ï¼ˆä»Šæ—¥ï¼‰
// input
//  â†“
// state.searchKeyword ã‚’æ›´æ–°
//  â†“
// render()
//  â†“
// state ã‚’è¦‹ã¦è¡¨ç¤ºã‚’æ±ºã‚ã‚‹

// DAY34â‘  state ã«æ¤œç´¢ç”¨ã®çŠ¶æ…‹ã‚’è¿½åŠ 

// ğŸ“ state å®šç¾©ã®ä¸­ã«è¿½åŠ 

// ğŸ‘‰ æ¤œç´¢æ–‡å­—åˆ—ã‚‚ã€ŒçŠ¶æ…‹ã€ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã€‚


// â‘  çŠ¶æ…‹ç®¡ç†ï¼ˆstateï¼‰
// çŠ¶æ…‹ã‚’1ç®‡æ‰€ã«ã¾ã¨ã‚ã‚‹

//ç”»é¢ã®çŠ¶æ…‹ã‚’ï¼‘ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆstateï¼‰ã§ç®¡ç†ã™ã‚‹
//ä»Šã€€ã€Œèª­ã¿è¾¼ã¿ä¸­ã‹ã€ã€Œã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ã‹ã€ã€Œè¡¨ç¤ºã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã€ã‚’ã¾ã¨ã‚ã¦æŒã¤
const state = {
    loading: false,//true:èª­ã¿è¾¼ã¿ä¸­â†’Loadingè¡¨ç¤º
    error:null,//ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆãªã‘ã‚Œã°nullï¼‰
    data:[],//æ­£å¸¸æ™‚ã«è¡¨ç¤ºã™ã‚‹APIã‹ã‚‰å–å¾—ã—ãŸä¸€è¦§ãƒ‡ãƒ¼ã‚¿
    searchKeyword: "" //è¿½åŠ 
};


// â‘¡ UIæç”»é–¢æ•°ï¼ˆçŠ¶æ…‹ã«å¿œã˜ã¦ç”»é¢è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ï¼‰

//function å‡¦ç†ã«åå‰ã¤ã‘ã¦ã€€renderStatusé–¢æ•°ï¼å‡¦ç†ã®ã¾ã¨ã¾ã‚Šã‚’ä½œã‚‹
// ç”»é¢ä¸Šã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆLoading / Errorï¼‰ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
function renderStatus(){

    //statusã‚’ä½œæˆã—ã¦DOMã§JSã‹ã‚‰HTMLã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«idã‚’å–å¾—ã™ã‚‹
    const status = document.getElementById("status");
//ifæ–‡ã§æ¡ä»¶åˆ†å²ã™ã‚‹

//state.loadingâ†’èª­ã¿è¾¼ã¿ä¸­ã®å ´åˆã¯ã€Loadingãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
    if(state.loading) {
        //stateãŒtrueãªã‚‰Loadingä¸­HTMLã¸ã®è¡¨ç¤ºã‚’å¤‰ãˆã‚‹ãŸã‚textContentã‚’ä½¿ã£ã¦Loadingè¡¨ç¤º
        status.textContent = "Loading...";
        //Loadingã®è¨˜è¿°ã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚returnã§HTMLã®statusã¸è¿”ã™
        return;// ã“ã‚Œä»¥ä¸Šä¸‹ã®åˆ¤å®šã‚’ã—ãªã„
    }
    //stateãŒã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹å ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹HTMLã¸ã®è¡¨ç¤ºã‚’å¤‰ãˆã‚‹ãŸã‚textContentã‚’ä½¿ã£ã¦errorè¡¨ç¤º
    if(state.error) {
        status.textContent = state.error;
        //errorã®è¨˜è¿°ã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚returnã§HTMLã®statusã¸è¿”ã™
        return;// ã“ã‚Œä»¥ä¸Šä¸‹ã®åˆ¤å®šã‚’ã—ãªã„
    }


    //ãƒ‡ãƒ¼ã‚¿ãŒå–ã‚Œã¦ã‚¨ãƒ©ãƒ¼ã‚‚ãªããƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚‚çµ‚ã‚ã£ã¦ã‚‹ã‘ã©ã€ä¸­èº«ãŒç©º
    //è¡¨ç¤ºãªã—ã‹ã‚‰ã€Œãƒ‡ãƒ¼ã‚¿ãªã—ã€ã¨ã€Œãƒ‡ãƒ¼ã‚¿ã‚ã‚Šã€ã«åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ
    if(state.data.length === 0) {
        status.textContent = "ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“";
        return;
    }


    // Loadingã§ã‚‚Errorã§ã‚‚ãªã„å ´åˆã¯ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã‚’æ¶ˆã™
     status.textContent = "";
}



// â‘¢ æŠ•ç¨¿ä¸€è¦§ã‚’æç”»ã™ã‚‹é–¢æ•°
//state.data ã«å…¥ã£ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ç”»é¢ã®ä¸€è¦§ã¨ã—ã¦è¡¨ç¤ºã—ç›´ã™
function renderList() {
    // ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ ul è¦ç´ list idã‚’å–å¾—
    const ul = document.getElementById("list");
    // ulå†…ã®è¡¨ç¤ºã‚’ä¸€åº¦ãƒªã‚»ãƒƒãƒˆã™ã‚‹ï¼ˆå‰ã®è¡¨ç¤ºãŒæ®‹ã‚‹ã¨äºŒé‡è¡¨ç¤ºã«ãªã‚‹ã‹ã‚‰ï¼‰
    ul.innerHTML = "";

//---------------------------------------------------

    //DAY34â‘£ renderList ã‚’ã€Œæ¤œç´¢å¯¾å¿œã€ã«é€²åŒ–
    // ğŸ“ renderList ã‚’æ›¸ãæ›ãˆã‚‹

    const filtered = state.data.filter(post =>
        //includesã§æ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦state.searchKeywordã¸è¿”ã™
        post.title.includes(state.searchKeyword)
    );

    //filteredã—ãŸã‚‚ã®ã‚’forEachã§é…åˆ—ã®ä¸­ã‚’1å€‹ãšã¤å‡¦ç†ã™ã‚‹
    filtered.forEach(post =>{
        //JSã‹ã‚‰HTMLã‚’å¤‰æ›´ã™ã‚‹ãŸã‚liã‚’å–å¾—
        const li = document.createElement("li");
        //liã®ä¸­ã‚’post.titleã«ç½®ãæ›ãˆ
        li.textContent = post.title;
        //ulã®liã¸è¿½åŠ ã™ã‚‹
        ul.appendChild(li);
    });

}

//------------------------------------------------------




// DAY32: æŠ•ç¨¿ã‚’çµã‚Šè¾¼ã‚€é–¢æ•°
function filterPosts(){
    //userIdãŒï¼‘ã®æŠ•ç¨¿ã ã‘æ®‹ã™
    return state.data.filter(post => post.userId === 1);
}

//ã“ã“è¶…é‡è¦ğŸ‘‡

//state.data ã¯ å¤‰æ›´ã—ã¦ãªã„
//filter ã®æˆ»ã‚Šå€¤ã‚’ä½¿ã£ã¦ã‚‹ã ã‘

//â‘¡ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çµæœã‚’è¡¨ç¤ºã™ã‚‹

function renderFilteredList(){
    const filteredPosts = filterPosts();
    //JSã‹ã‚‰HTMLè¦ç´ ã‚’å–å¾—ã™ã‚‹ã€€ul list
    const ul = document.getElementById("list");
    //é‡è¤‡ã‚’é˜²ããŸã‚ulã®ä¸­èº«ã¯ä¸€æ—¦ãªãã™
    ul.innerHTML = "";

    //ulã®liã®ä¸­èº«ã®é…åˆ—ã‚’1å€‹ãšã¤å‡¦ç†ã™ã‚‹
    filteredPosts.forEach(post =>{
        //JSã‹ã‚‰HTMLè¦ç´ ã‚’å–å¾—ã™ã‚‹ ul li
        const li = document.createElement("li");
        //liã‚’post.titleã«ç½®ãæ›ãˆã‚‹
        li.textContent = post.title;
        //ä½œã£ãŸ li ã‚’ ul ã®å­è¦ç´ ã¨ã—ã¦è¿½åŠ ã™ã‚‹â†’ ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹
        ul.appendChild(li);
    });

}


// â‘¢ ãƒœã‚¿ãƒ³ã‚’1å€‹ã ã‘ç”¨æ„ï¼ˆHTMLï¼‰
// <button id="filterBtn">userId = 1</button>


//â‘£ ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¡¨ç¤º
document.getElementById("filterBtn").addEventListener("click",()=>{
    renderFilteredList();
});

// âœ… å‹•ä½œç¢ºèªï¼ˆã“ã“å¿…ãšï¼‰
// åˆæœŸè¡¨ç¤º

// fetchPosts å®Ÿè¡Œ

// å…¨ä»¶è¡¨ç¤ºã•ã‚Œã‚‹

// ãƒœã‚¿ãƒ³æŠ¼ã™

// ä¸€è¦§ãŒæ¸›ã‚‹

// userId === 1 ã ã‘ã«ãªã‚‹

// ğŸŸ¢ DAY33 ã‚„ã‚‹ã“ã¨ï¼ˆè¶…ãƒŸãƒ‹ç‰ˆï¼‰
//------------------------------------------------------
// ã€Œãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã€ã§ã¯ãªã
// å…¥åŠ›ãŒå¤‰ã‚ã£ãŸç¬é–“ã«å‡¦ç†ã‚’èµ°ã‚‰ã›ã‚‹


// â‘  input ã‚’1ã¤è¿½åŠ ï¼ˆHTMLï¼‰

// <input id="searchInput" placeholder="ã‚¿ã‚¤ãƒˆãƒ«æ¤œç´¢" />


// â‘¡ æ¤œç´¢ç”¨ filter é–¢æ•°ã‚’ä½œã‚‹
function searchPosts(keyword) {
    //postã‹ã‚‰filterã•ã‚ŒãŸã‚‚ã®ã‚’post.titleã¸
    return state.data.filter(post =>
    //includesã§æ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦keywordã¸è¿”ã™
        post.title.includes(keyword)
    );
}

// ğŸ‘‰ ä»Šæ—¥ã®æ ¸å¿ƒ
// includes = ã€Œæ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã€

//â‘¢ input ãŒå¤‰ã‚ã£ãŸã‚‰æ¤œç´¢ã™ã‚‹

//JSã§HTMLè¦ç´ ã‚’å‹•ã‹ã™ãŸã‚DOMã§idå–å¾—
document.getElementById("searchInput")
//ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ ã€€
// "input" ã‚¤ãƒ™ãƒ³ãƒˆã¨ã¯ï¼Ÿ

// æ–‡å­—ã‚’ 1æ–‡å­—å…¥åŠ›

// å‰Šé™¤

// ã‚³ãƒ”ãƒš

// ğŸ‘‰ å€¤ãŒå¤‰ã‚ã‚‹ãŸã³ã«å¿…ãšç™ºç«ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ

// ï¼ˆchange ã‚ˆã‚Šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰

// input ãŒå¤‰åŒ–ã—ãŸçµæœã¨ã—ã¦ã€ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±(e)ãŒè‡ªå‹•ã§æ¸¡ã•ã‚Œã‚‹

// ğŸ“Œ (e)ã¯è‡ªåˆ†ã§å…¥ã‚Œã¦ã‚‹ã‚‚ã®ã˜ã‚ƒãªã„
// ğŸ“Œ ãƒ–ãƒ©ã‚¦ã‚¶ãŒå‹æ‰‹ã«ç”¨æ„ã—ã¦æ¸¡ã—ã¦ãã‚‹

// ã“ã® (e) ã®ä¸­ã«ã¯ğŸ‘‡ãŒå…¥ã£ã¦ã‚‹ï¼š

// ã©ã®è¦ç´ ã§èµ·ããŸã‹
// ä»Šã® input ã®çŠ¶æ…‹
// å…¥åŠ›ã•ã‚ŒãŸå€¤ ãªã©

    .addEventListener("input",(e) => {

// DAY34â‘¡ input ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ŒçŠ¶æ…‹ã‚’å¤‰ãˆã‚‹ã ã‘ã€ã«ã™ã‚‹
// ğŸ“ DAY33 ã® input å‡¦ç†ã‚’å¤‰æ›´

//----------------------------------------------
//DAY33input å‡¦ç†
        // const keyword = e.target.value;   

//-----------------------------------------------


//-----------------------------------------------


//DAY34 input å‡¦ç†ã«å¤‰æ›´
       
            state.searchKeyword = e.target.value;// çŠ¶æ…‹æ›´æ–°

//------------------------------------------------


    // keyword ã‚’æ¸¡ã™
    // ä¸­ã§ã¯ searchPosts(keyword) ãŒå‘¼ã°ã‚Œã‚‹
    // è¿”ã£ã¦ããŸãƒ‡ãƒ¼ã‚¿ã ã‘ã‚’ç”»é¢ã«è¡¨ç¤º

//--------------------------------------------------
//DAY33 è¨˜è¿°

    //     renderSearchList(keyword);
    // });

    // input ãŒå¤‰ã‚ã‚‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ã¦
    // ãã®æƒ…å ±ãŒ (e) ã¨ã—ã¦æ¸¡ã•ã‚Œã‚‹
    // e.target ã¯ input è‡ªä½“ã‚’æŒ‡ã—ã¦ã„ã¦
    // value ã§ä¸­ã®æ–‡å­—ã‚’å–ã‚Šå‡ºã™
    // å–ã‚Šå‡ºã—ãŸæ–‡å­—ã‚’ keyword ã«å…¥ã‚Œã¦
    // renderSearchList(keyword) ã«æ¸¡ã—ã¦ã„ã‚‹
//--------------------------------------------------


//-------------------------------------------------
// DAY34 å¤‰æ›´å¾Œ

        render();// UIå†æç”»
     });

//-------------------------------------------------

// â‘£ æ¤œç´¢çµæœã‚’è¡¨ç¤ºï¼ˆâ‘¢ã§è¨˜è¿°ã—ãŸçµæœrenderSearchList(keyword)ã‚’è¡¨ç¤ºï¼‰


function renderSearchList(keyword) {
    //çµæœã‚’æ¤œç´¢ç”¨filteré–¢æ•°ã¸è¿”ã™
    const result = searchPosts(keyword);
    //JSã‹ã‚‰HTMLè¦ç´ ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ul list idã‚’å–å¾—
    const ul = document.getElementById("list");
    //é‡è¤‡ã‚’é˜²ããŸã‚ulã®ä¸­èº«ã‚’ãƒªã‚»ãƒƒãƒˆ
    ul.innerHTML="";

    result.forEach(post => {
        //JSã‹ã‚‰HTMLè¦ç´ ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚liã‚’å–å¾—
        const li = document.createElement("li");
        //liã‚’post.titleã«ç½®ãæ›ãˆã‚‹
        li.textContent = post.title;
        //ä½œã£ãŸ li ã‚’ ul ã®å­è¦ç´ ã¨ã—ã¦è¿½åŠ ã™ã‚‹â†’ ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹
        ul.appendChild(li);
    })

}

// DAY34â‘¢ render ã‚’ã€Œå¸ä»¤å¡”ã€ã«ã™ã‚‹
// ğŸ“ æ–°ã—ã render é–¢æ•°ã‚’ä½œã‚‹


function render() {
    renderStatus();
    renderList();
}

// ğŸ‘‰

// UI ã¯ å¿…ãš render() çµŒç”±

// ç›´æ¥ renderList / renderStatus ã‚’å©ã‹ãªã„


//-----------------------------------------------------

//ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã€çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¦ã€UIã‚’å†æç”»ã™ã‚‹
//â€» UIãã®ã‚‚ã®ã¯æã‹ãªã„ğŸ‘‰ çŠ¶æ…‹ã‚’å¤‰ãˆã‚‹å¸ä»¤å¡”
// fetchPosts() å…¨ä½“ã®æµã‚Œï¼ˆæ—¥æœ¬èªï¼‰
// â‘  ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é–‹å§‹
// â‘¡ ã‚¨ãƒ©ãƒ¼åˆæœŸåŒ–
// â‘¢ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºæ›´æ–°
// â‘£ APIé€šä¿¡
// â‘¤ æˆåŠŸ â†’ ãƒ‡ãƒ¼ã‚¿ä¿å­˜ï¼†ä¸€è¦§è¡¨ç¤º
// â‘¥ å¤±æ•— â†’ ã‚¨ãƒ©ãƒ¼ä¿å­˜
// â‘¦ æœ€å¾Œã«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çµ‚äº†ï¼†è¡¨ç¤ºæ›´æ–°

//APIã‹ã‚‰æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€çŠ¶æ…‹ã¨UIã‚’æ›´æ–°ã™ã‚‹éåŒæœŸé–¢æ•°


//DAY34fetchPosts ã‚‚ render() ã‚’ä½¿ã†
//ğŸ“ renderStatus / renderList ã‚’ç›´æ¥å‘¼ã°ãªã„


async function fetchPosts(){
    // â‘  ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é–‹å§‹ï¼ˆé€šä¿¡å‰ï¼‰
    state.loading = true;
    //â‘¡ ã‚¨ãƒ©ãƒ¼åˆæœŸåŒ– å‰å›ã®ã‚¨ãƒ©ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
    state.error = null;
    //â‘¢ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºæ›´æ–°(çŠ¶æ…‹ã«å¿œã˜ã¦)
    render();

    try{
        // APIã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹
        const res = await fetch("https://jsonplaceholder.typicode.com/posts");
        //// resãŒokã˜ã‚ƒãªã‹ã£ãŸå ´åˆã€HTTPã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦æ‰±ã†
        if(!res.ok){
            throw new Error("é€šä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ");
        }
        // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’JSONã«å¤‰æ›
        const data = await res.json();
        // å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’stateã«ä¿å­˜
        state.data = data;
        // ãƒ‡ãƒ¼ã‚¿å–å¾—å¾Œã€ä¸€è¦§è¡¨ç¤ºã‚’æ›´æ–°
        render();
        
    } catch(err){
        //// ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’stateã«ä¿å­˜
        state.error = err.message;
    } finally {
        // æˆåŠŸãƒ»å¤±æ•—ã«é–¢ã‚ã‚‰ãšã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çµ‚äº†
        state.loading = false ;
        // æœ€çµ‚çš„ãªçŠ¶æ…‹ã«å¿œã˜ã¦ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã‚’æ›´æ–°
        renderStatus();
    }
    //ãªãœ finally ã« loading = false ãŒã‚ã‚‹ï¼Ÿ

    // ğŸ‘‰ æˆåŠŸã§ã‚‚å¤±æ•—ã§ã‚‚å¿…ãšãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’çµ‚ã‚ã‚‰ã›ãŸã„ã‹ã‚‰

    // tryï¼šæˆåŠŸãƒ«ãƒ¼ãƒˆ

    // catchï¼šå¤±æ•—ãƒ«ãƒ¼ãƒˆ

    // finallyï¼šã©ã£ã¡ã§ã‚‚é€šã‚‹

    // ï¼ UIãŒå£Šã‚Œãªã„

}

fetchPosts();





// ğŸ§  å…¨ä½“æ§‹é€ ï¼ˆã¾ãšä¿¯ç°ï¼‰
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ fetchPosts()  â”‚   â† ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»åˆ¤æ–­ï¼ˆãƒ­ã‚¸ãƒƒã‚¯ï¼‰
// â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
//         â”‚
//         â–¼
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚     state       â”‚   â† ä»Šã®ç”»é¢ã®çŠ¶æ…‹
// â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
// â”‚ loading : true/false
// â”‚ error   : null / message
// â”‚ data    : [] / posts
// â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//         â”‚
//         â–¼
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚      UIæç”»é–¢æ•°         â”‚
// â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
// â”‚  â”‚ renderStatus() â”‚     â”‚
// â”‚  â”‚  ãƒ»Loading     â”‚     â”‚
// â”‚  â”‚  ãƒ»Error       â”‚     â”‚
// â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
// â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
// â”‚  â”‚ renderList()   â”‚     â”‚
// â”‚  â”‚  ãƒ»ä¸€è¦§è¡¨ç¤º    â”‚     â”‚
// â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// ğŸ” renderStatus ã¨ renderList ã®å½¹å‰²åˆ†æ‹…
// renderStatus()
// state.loading === true
//         â†“
// ã€ŒLoading...ã€è¡¨ç¤º

// state.error ãŒã‚ã‚‹
//         â†“
// ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

// ã©ã¡ã‚‰ã§ã‚‚ãªã„
//         â†“
// ä½•ã‚‚è¡¨ç¤ºã—ãªã„


// ğŸ‘‰ ã€Œä»Šã®çŠ¶æ…‹ã€ã‚’æ–‡ç« ã§ä¼ãˆã‚‹UI

// renderList()
// state.data ã«ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã‚‹
//         â†“
// ul ã‚’ç©ºã«ã™ã‚‹
//         â†“
// 1ä»¶ãšã¤ li ã‚’ä½œã‚‹
//         â†“
// ä¸€è¦§ã¨ã—ã¦è¡¨ç¤º

// ğŸ‘‰ ã€Œãƒ‡ãƒ¼ã‚¿ãã®ã‚‚ã®ã€ã‚’è¦‹ã›ã‚‹UI

// ğŸ§© 2ã¤ã®é–¢ä¿‚ï¼ˆè¶…é‡è¦ï¼‰
// âŒ ã‚„ã£ã¦ãªã„ã“ã¨

// renderStatus ã¯ data ã‚’è¦‹ãªã„

// renderList ã¯ loading / error ã‚’è¦‹ãªã„

// ğŸ‘‰ ãŠäº’ã„ã®é ˜åŸŸã«å¹²æ¸‰ã—ãªã„

// â­• æ­£ã—ã„é–¢ä¿‚
//         state
//        /     \
//       â–¼       â–¼
// renderStatus  renderList


// ğŸ‘‰ å…±é€šã®stateã‚’è¦‹ã‚‹ã ã‘

// ğŸ” æ™‚ç³»åˆ—ã§è¦‹ã‚‹ã¨ï¼ˆè¶…ç†è§£ã—ã‚„ã™ã„ï¼‰
// â‘  fetché–‹å§‹
// state.loading = true
// state.error = null

// renderStatus() â†’ ã€ŒLoading...ã€
// renderList()   â†’ ã¾ã å‘¼ã°ã‚Œãªã„

// â‘¡ æˆåŠŸæ™‚
// state.data = data
// state.loading = false

// renderList()   â†’ ä¸€è¦§è¡¨ç¤º
// renderStatus() â†’ è¡¨ç¤ºã‚¯ãƒªã‚¢

// â‘¢ å¤±æ•—æ™‚
// state.error = "é€šä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ"
// state.loading = false

// renderStatus() â†’ ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
// renderList()   â†’ å‘¼ã°ã‚Œãªã„

// ğŸ§  ä¸€è¨€ã§è¨€ã†ã¨

// fetchPostsï¼šå¸ä»¤å¡”

// stateï¼šæ²ç¤ºæ¿

// renderStatusï¼šçŠ¶æ³èª¬æ˜ä¿‚

// renderListï¼šçµæœè¡¨ç¤ºä¿‚